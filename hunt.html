<!DOCTYPE html>
<html>
    <head>
    <title>BCCS Hunting</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    </head>
    <body>
        <center>
            <h1 class="orange-text">BCCS Hunting</h1>
            <h4 class="red-text" id="playerOneId">Player One: 5</h4>
            <h4 class="red-text" id="playerTwoId">Player Two: 7</h4><br><br><br>
            <canvas id="canvas" width="600" height="400"></canvas>
        </center>
        <script src="canvas.js"></script>

        <script type="text/javascript">
            var gun = {
                x: 490,
                y: 200,
                movement: null,
                dir: null
            }

            function drawRightGun(){
                context.beginPath();
                context.arc(600, 200, 50, .5 * Math.PI, 1.5 * Math.PI);
                context.closePath();
                context.fillStyle = "black";
                context.fill();
                context.strokeStyle = "black";

                context.beginPath();
                context.lineWidth = 17
                context.moveTo(560, 200);
                context.lineTo(gun.x, gun.y);
                context.stroke();

                if (gun.y == 200){
                    gun.movement = "positive"
                }
                if (gun.y < 200 && gun.dir == "down"){
                    gun.movement = "negative"
                }
                if (gun.y > 200 && gun.dir == "up"){
                    gun.movement = "negative"
                }
            }

            function moveGunUp(){
              //Functionality goes here.  See keyclick.js
              gun.dir = "up"

                if (gun.y >= 130){
                    gun.y -= 1
                    if (gun.movement == "negative"){
                     gun.x -= .5
                    } else {
                     gun.x += .5
                    }
                }
            }

            function moveGunDown(){
                gun.dir = "down"

                 if (gun.y <= 270){
                    gun.y += 1
                    if (gun.movement == "negative"){
                     gun.x -= .5
                    } else {
                     gun.x += .5
                    }
                 }
            }

            document.addEventListener("keydown", function(event){
                //the 's' key
                if (event.keyCode == 83) {
                    moveGunDown();
                } // up arrow key
                else if (event.keyCode == 38) {
                    moveGunUp();
                } // the 'w' key
                else if (event.keyCode == 87) {
                    moveGunUp();
                } // down arrow key
                else if (event.keyCode == 40){
                    moveGunDown();
                } // space bar
                else if (event.keyCode == 32){
                    fireBullet()
                }
            });

            var bullets =[];

            function fireBullet(){
                bullets.push({
                    x: gun.x,
                    y: gun.y,
                    size: 14.7,
                    speed: 4
                })
            }

            function drawBullets(){
                for (i = 0; i < bullets.length; i++){
                    context.fillStyle = "grey";
                    context.beginPath();
                    context.fillRect(bullets[i].x, bullets[i].y, bullets[i].size, bullets[i].size);
                    context.stroke();
                    context.fillStyle = 'black';

                }
            }

            function moveBullets(){
                for (i=0; i < bullets.length; i++){
                    bullets[i].x -= bullets[i].speed;
                }
            }
            //run through the code to make the game work
            function playGame(){
                context.clearRect(0,0,canvas.width,canvas.height);
                drawRightGun();
                moveBullets();
                drawBullets();
                requestAnimationFrame(playGame);
            }

            playGame()
        </script>

    </body>
</html>

